{{ "{% set data = load_setup_py_data() %}" }}
{{ "{% set version = data.get('version') or 'placehold' %}" }}

package:
  name: {{ cookiecutter.package_name }}
  version: {{ "{{ version }}" }}

source:
  path: ../..

build:
  script: make install

requirements:
  host:
    - python {{ "{{ python }}" }}
    - setuptools

  run:
    - python {{ "{{ python }}" }}
    - qiime2 {{ "{{ qiime2_epoch }}" }}
    - q2-types {{ "{{ qiime2_epoch }}" }}

test:
  requires:
    - pytest
  imports:
    - {{ cookiecutter.module_name }}
    - qiime2.plugins.{{ cookiecutter.plugin_name.replace('-', '_') }}
  commands:
    - pytest {{ cookiecutter.module_name }} --pyargs {{ cookiecutter.module_name }}

about:
  home: {{ cookiecutter.project_url }}
  license: BSD-3-Clause
  license_family: BSD
